using Microsoft.VisualStudio.TestTools.UnitTesting;
using NetTopologySuite.Geometries;
using NetTopologySuite.IO;

namespace NetTopologySuite.Clipper.Tests
{
	[TestClass]
	public class PolygonClipperTests
	{
		[TestMethod]
		public void ClipMultiPolygonTest()
		{
			var wkt = new WKTReader().Read(
				"MULTIPOLYGON(((-80.66859097886578 26.663762716650286, -80.6688230969945 26.656837138659036, -80.667795418133792 26.65682937086758, -80.667686578933086 26.65727471507439, -80.666963512952989 26.65730523411106, -80.6667617362841 26.663742584000332, -80.66859097886578 26.663762716650286)), ((-80.670514647254109 26.663709430760704, -80.670723135400976 26.656841553231835, -80.668894781003658 26.656842673351715, -80.66867462160026 26.663799608104284, -80.670163963623935 26.66379677545433, -80.670514647254109 26.663709430760704)))");

			var clipWkt =
				(Polygon)new WKTReader().Read(
					"POLYGON ((-80.672607421875 26.657277674217585, -80.6671142578125 26.657277674217585, -80.6671142578125 26.662186843258542, -80.672607421875 26.662186843258542, -80.672607421875 26.657277674217585))");

			var clipped = new PolygonClipper().ClipPolygon(wkt, clipWkt);

			Assert.AreEqual("MULTIPOLYGON (((-80.67070989607693 26.657277674217585, -80.67056086844042 26.662186843258542, -80.66872565921365 26.662186843258542, -80.66888101495086 26.657277674217585, -80.67070989607693 26.657277674217585)), ((-80.66880833197567 26.657277674217585, -80.66864379594232 26.662186843258542, -80.6671142578125 26.662186843258542, -80.6671142578125 26.657298871499595, -80.66761647004341 26.657277674217585, -80.66880833197567 26.657277674217585)))", clipped.ToString());
		}
	}
}
